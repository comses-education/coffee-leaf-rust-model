Bootstrap: docker
From: comses/osg-julia:1.7.3
Stage: spython-base

%files
. /code
%post

JULIA_LOAD_PATH=/code:
JULIA_DEPOT_PATH=/code/.julia:/opt/julia/share/julia

cd /code

julia /code/install.jl && \
chmod -R go+rX /opt/julia/share/julia /code

%environment
export JULIA_LOAD_PATH=/code:
export JULIA_DEPOT_PATH=/code/.julia:/opt/julia/share/julia
%runscript
cd /code
exec /bin/bash "$@"
%startscript
cd /code
exec /bin/bash "$@"